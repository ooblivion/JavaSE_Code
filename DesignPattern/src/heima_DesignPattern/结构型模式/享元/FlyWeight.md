# 享元模式 Flyweight
## 定义
运用共享技术来有效支持大量细粒度对象的复用，它通过共享已经存在的对象来大幅度减少需要创建的对象数量，避免了大量相似对象的开销，从而提高系统资源的利用率

## 结构
- 享元模式的两种状态
    - 内部状态：不会随环境而改变的可共享部分
    - 外部状态：随环境而改改变的不可共享的部分，享元模式的实现要领就是区分应用中的这两种状态，并将外部状态外部化（可作为方法中的形式参数传递
    
- 享元模式中的角色
    - 抽象享元角色 Flyweight 通常是一个接口或抽象类
    - 具体享元 Concrete Flyweight
    - 非享元 Unsharable Flyweight
    - 享元工厂 Flyweight Factory

有点像单例模式和工厂模式的组合？

## 优缺点及使用场景
- 优点
  - 极大减少内存中相同或相似对象的数量，节约系统资源
  - 享元模式中的外部状态相对独立，且不影响内部状态
- 缺点
  - 为了使对象可以共享，需要将享元对象的部分状态外部化，分离内部状态和外部状态，使程序逻辑复杂
- 使用场景
  - 一个系统中有大量相同或相似的对象，造成内存的大量浪费
  - 对象的大部分都可以外部化，可以将这些外部状态传入对象中
  - 在是使用享元模式时需要维护一个储存元对象的享元池，而这需要耗费一定的内存资源，因此，应当在需要多次重复使用享元对象时候才使用享元模式

## JDK源码解析
- Integer类使用了享元模式

线程池是不是享元模式？是的